(function(S){typeof define=="function"&&define.amd?define(S):S()})(function(){"use strict";var S=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},_={exports:{}};(function(e,l){(function(i,t){e.exports=t()})(S,function(){return function i(t,n,a){var c=window,f="application/octet-stream",d=a||f,o=t,b=!n&&!a&&o,s=document.createElement("a"),x=function(r){return String(r)},u=c.Blob||c.MozBlob||c.WebKitBlob||x,g=n||"download",p,R;if(u=u.call?u.bind(c):Blob,String(this)==="true"&&(o=[o,d],d=o[0],o=o[1]),b&&b.length<2048&&(g=b.split("/").pop().split("?")[0],s.href=b,s.href.indexOf(b)!==-1)){var h=new XMLHttpRequest;return h.open("GET",b,!0),h.responseType="blob",h.onload=function(r){i(r.target.response,g,f)},setTimeout(function(){h.send()},0),h}if(/^data:([\w+-]+\/[\w+.-]+)?[,;]/.test(o))if(o.length>1024*1024*1.999&&u!==x)o=U(o),d=o.type||f;else return navigator.msSaveBlob?navigator.msSaveBlob(U(o),g):w(o);else if(/([\x80-\xff])/.test(o)){var y=0,C=new Uint8Array(o.length),z=C.length;for(y;y<z;++y)C[y]=o.charCodeAt(y);o=new u([C],{type:d})}p=o instanceof u?o:new u([o],{type:d});function U(r){var m=r.split(/[:;,]/),v=m[1],J=m[2]=="base64"?atob:decodeURIComponent,k=J(m.pop()),A=k.length,B=0,L=new Uint8Array(A);for(B;B<A;++B)L[B]=k.charCodeAt(B);return new u([L],{type:v})}function w(r,m){if("download"in s)return s.href=r,s.setAttribute("download",g),s.className="download-js-link",s.innerHTML="downloading...",s.style.display="none",document.body.appendChild(s),setTimeout(function(){s.click(),document.body.removeChild(s),m===!0&&setTimeout(function(){c.URL.revokeObjectURL(s.href)},250)},66),!0;if(/(Version)\/(\d+)\.(\d+)(?:\.(\d+))?.*Safari\//.test(navigator.userAgent))return/^data:/.test(r)&&(r="data:"+r.replace(/^data:([\w\/\-\+]+)/,f)),window.open(r)||confirm(`Displaying New Document

Use Save As... to download, then click back to return to this page.`)&&(location.href=r),!0;var v=document.createElement("iframe");document.body.appendChild(v),!m&&/^data:/.test(r)&&(r="data:"+r.replace(/^data:([\w\/\-\+]+)/,f)),v.src=r,setTimeout(function(){document.body.removeChild(v)},333)}if(navigator.msSaveBlob)return navigator.msSaveBlob(p,g);if(c.URL)w(c.URL.createObjectURL(p),!0);else{if(typeof p=="string"||p.constructor===x)try{return w("data:"+d+";base64,"+c.btoa(p))}catch{return w("data:"+d+","+encodeURIComponent(p))}R=new FileReader,R.onload=function(r){w(this.result)},R.readAsDataURL(p)}return!0}})})(_);const F=_.exports;let q={font_size:.4,font_color:"#FFFFFF",background_alpha:.5,background_color:"#9C27B0",Stroke:"none"};function M(e){return JSON.parse(e)}function O(e){return JSON.stringify(e)}function j(e){let l={},t=e.replace(/\n$/,"").split(`

`);for(let n of t){let a=n.split(`
`),c=parseInt(a[0]),f=a[1].split(" --> "),d=a.slice(2).join();l[c]={from:f[0],to:f[1],content:d}}return l}function D(e){let l="";for(let i in e){let t=e[i].from+" --> "+e[i].to,n=e[i].content;l+=[i,t,n].join(`
`)+`

`}return l}function N(e,l){let i={...q,...l,body:[]},t=n=>{let a=n.split(":"),c=parseInt(a[0]),f=parseInt(a[1]),d=parseFloat(a[2].replace(",","."));return c*60*60+f*60+d};for(let n in e)i.body[n]={from:t(e[n].from),to:t(e[n].to),location:2,content:e[n].content};return i}function G(e){let l={},i=t=>[[Math.trunc(t/60/60),Math.trunc(t/60),Math.trunc(t%60)].map(n=>n.toString().padEnd(2,"0")).join(":"),(t%1).toString().slice(2).padEnd(3,"0")].join(",");return e.body.forEach((t,n)=>{l[n]={from:i(t.from),to:i(t.to),content:t.content}}),l}let E=F,T=document.getElementById("bsc-converter");T!=null&&(T.onchange=()=>{let e=new FileReader,l=T.value.split(".").pop();e.readAsText(T.files[0],"utf-8"),e.onload=()=>{let i=e.result;if(l=="bcc"){let t=M(i),n=G(t),a=D(n);E(a,"res.srt","text/plain")}else if(l=="srt"){let t=j(i),n=N(t),a=O(n);E(a,"res.bcc","text/plain")}}});let I=document.getElementById("bsc-request"),H=document.getElementById("bsc-request-submit");H.onclick=()=>{I.value&&new XMLHttpRequest().open(GET,I.value)}});
